<div class="dashboard-container">

    <header class="dashboard-header">
        <h2>ðŸ’Ž Precious Metal Prices </h2>
        <p> Current prices in USD per ounce </p>
    </header>

    <div *ngIf="loading" class="loading-container">
        <div class="spinner"></div>
        <p>Loading metal prices...</p>
    </div>

    <div *ngIf="error" class="error-container">
        <p>{{ error }}</p>
        <button (click)="loadCurrentPrices()">Try Again</button>
    </div>


    <div *ngIf="!loading && !error" class="chart-section">
        <div class="chart-container">
            <canvas #chartCanvas></canvas>
        </div>
    </div>

    <div *ngIf="!loading && !error && metalPrices.length > 0" class="prices-table">
        <h3> Detailed Prices </h3>
        <table>
            <thead>
                <tr>
                    <th>Metal</th>
                    <th>Current Price</th>
                    <th>Change</th>
                    <th>Change %</th>
                    <th>Last Updated</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let metal of metalPrices">
                    <td>{{ getMetalDisplayName(metal.metal) }}</td>
                    <td>{{ metal.currentPrice | number:'1.2-2' }}</td>
                    <td [class]="metal.changeAmount >= 0 ? 'positive' : 'negative'">
                        {{ metal.changeAmount >= 0 ? '+' : '' }}${{ metal.changeAmount | number:'1.2-2' }}
                    </td>
                    <td [class]="metal.changePercent >= 0 ? 'positive' : 'negative'">
                        {{ metal.changePercent >= 0 ? '+' : '' }}{{ metal.changePercent | number:'1.2-2' }}%
                    </td>
                    <td>{{ metal.lastUpdated | date:'short' }}</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>